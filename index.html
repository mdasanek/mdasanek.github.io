<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mda Sanek — Designer</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-icon.png">
    <link rel="manifest" href="manifest.json">
    <meta name="msapplication-config" content="browserconfig.xml">
</head>
<body>
    <!-- Preloader -->
    <div id="preloader" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;">
        <div id="loader-gif-container" style="margin-bottom:16px;"></div>
        <div id="preloader-percent">0</div>
    </div>

    <!-- Main Content (hidden until loaded) -->
    <div id="main-content" style="visibility:hidden;opacity:0;transition:opacity 0.8s ease;">
    <!-- Header Section -->
    <img src="w/mdasanek_header.svg" class="header-image">
    <div class="header-container">
        <section class="header">
        <div class="intro">
            <p>
                Hi, my name is Sasha Korshenyuk and I'm a graphic designer. 
                This site is a curated snapshots, featuring selected projects, concepts, and educational experiments. Full case studies are available on my 
                <a href="https://www.behance.net/korshenyk" target="_blank" rel="noopener"><u>Behance profile.</u></a> 
            </p>
            <p class="section-spacing">
                <u>Focus</u>: Branding, Brand Strategy, Visual Identity, Packaging, Web Design, Icons, Motion, Event Design, Navigation, Typography
            </p>
            <p class="section-spacing">
                <u>Experience</u>: Startups, Funds, Big Tech, FinTech, EdTech, Crypto
            </p>
            <p class="section-spacing">
                <u>Clients</u>: Avito, AGIMA, JetBrains, Manychat, Wildberries,  Yandex, Ozon
        </p>
      </div>
        <div class="work">
            <u class="section-title">Work</u>
            <span><a href="http://eshgruppa.com/" target="_blank" rel="noopener">ESH — Brand Design Partner</a></span>
            <span><a href="https://portfolio.hse.ru/Student/16272" target="_blank" rel="noopener">HSE — Design Teacher</a></span>
            <span><a href="https://www.mayro.am/" target="_blank" rel="noopener">Mayro — Event Design Partner</a></span>
            <span><a href="https://xsolla.com/" target="_blank" rel="noopener">Xsolla — Senior Brand Designer</a></span>
            <span><a href="https://www.behance.net/gallery/227764787/AI9-Brand-Identity" target="_blank" rel="noopener">AI9: Startup House — Art Direction</a></span>
            <span><a href="https://embacy.io/" target="_blank" rel="noopener">Embacy — Lead Designer</a></span>
            <span>Hadassah Medical — Senior Package Designer</span>
            <span>Imagine — UI/UX Designer</span>
            <span><a href="https://www.rshu.ru/university/periodicals/boreal/2019/BZ_2019_69.pdf" target="_blank" rel="noopener">RSHU — Chief Editor & Editorial Designer</a></span>
            <span>KCM — Editorial Design & UI/UX</span>
            <span>Hartung — Editorial Designer</span>

            <u class="section-title section-spacing">School</u>
            <span><a href="https://portfolio.hse.ru/Student/16272" target="_blank" rel="noopener">MS — HSE ART AND DESIGN — Art Direction</a></span>
            <span>BA — RSHU — Icon Painting</span>
            <span>DesignWorkout — Offline Workshop</span>
            <span>DesignWorkout — Online Course</span>
            <span>desgraf — Offline Course</span>
        </div>
        <div class="projects">
            <u class="section-title">Edu & Pet Projects</u>
            <span><a href="https://mdasanek.github.io/KIS/index.html">KIS — Design Course for Beginners</a></span>
            <span>Henrik M — Digitize Armenian Typefaces</span>

            <u class="section-title section-spacing">Publications</u>
            <span><a href="https://abduzeedo.com/a19-building-bold-startup-branding-and-visual-identity" target="_blank" rel="noopener">Abduzeedo</a></span>
            <span><a href="https://packagingoftheworld.com/2021/06/yhtys-typography-beer-package.html" target="_blank" rel="noopener">POTW</a></span>
            <span><a href="https://worldbranddesign.com/student-sasha-korshenyuk-created-identity-for-consumersim-exhibition/" target="_blank" rel="noopener">WBDS</a></span>

            <u class="section-title section-spacing">Exhibitons & Events</u>
            <span><a href="https://yahall.am/" target="_blank" rel="noopener">Yandex Office Opening, Yerevan</a></span>
            <span><a href="https://www.letsdefine.io/" target="_blank" rel="noopener">Let's Define: Design Concept at Ailaic</a></span>
            <span><a href="https://design.hse.ru/news/1963" target="_blank" rel="noopener">Human Tired at HSE ART GALLERY</a></span>
            <span><a href="https://vk.com/besfes" target="_blank" rel="noopener">Unconscious Art Fest at Balti, SPb</a></span>
        </div>
        <div class="awards">
            <u class="section-title">Awards</u>
            <span><a href="https://www.behance.net/korshenyk" target="_blank" rel="noopener">Behance — 27 rewards</a></span>
            <span><a href="https://worldbranddesign.com/embacy-created-brand-identity-and-website-for-kinescope/" target="_blank" rel="noopener">WBDS — USA — Kinescope — Bronze</a></span>
            <span><a href="https://worldbranddesign.com/cooperative-chyorniy-coffee-hoyse-brand-identity-concept-by-sasha-korshenyuk/" target="_blank" rel="noopener">WBDS — USA — Cooperative Chyorniy — Bronze</a></span>
            <span><a href="https://hiiibrand.com/winners/638eb1accf59453f958eff05c1d1138a" target="_blank" rel="noopener">Hiiibrand — China — Kinescope — Bronze</a></span>
            <span><a href="https://festivalsreda.ru/" target="_blank" rel="noopener">Sreda — Consume Less — Silver</a></span>
            <span><a href="https://festivalsreda.ru/" target="_blank" rel="noopener">Sreda — Avito Design Team — Bronze</a></span>
            <span><a href="https://festivalsreda.ru/" target="_blank" rel="noopener">Sreda — YHTYS — Shortlist</a></span>
            <span><a href="https://www.awwwards.com/embacy/" target="_blank" rel="noopener">Awwwards — Embacy — HM</a></span>
            <span><a href="https://www.awwwards.com/embacy/" target="_blank" rel="noopener">Awwwards — Embacy Collection — HM</a></span>
            <span><a href="https://www.awwwards.com/embacy/" target="_blank" rel="noopener">Awwwards — Dostoevsky — HM</a></span>
            <span><a href="https://www.awwwards.com/embacy/" target="_blank" rel="noopener">Awwwards — #000000 — HM</a></span>
            <span><a href="https://www.awwwards.com/embacy/" target="_blank" rel="noopener">Awwwards — 10 Ways to Peace — HM</a></span>
            <span><a href="https://dafes.net/project/2398152a1bf94f0b853ed444b15335f1" target="_blank" rel="noopener">DAFES — KIS: Education Course — Shortlist</a></span>
        </div>
        <div>
            <u class="section-title">Contacts</u>
            <div class="contact">
            <div>
                <a href="https://www.behance.net/korshenyk" target="_blank" rel="noopener">Behance</a>
                <a href="https://www.instagram.com/korshenyk/" target="_blank" rel="noopener">Instagram</a>
                <a href="https://www.facebook.com/akzvosd" target="_blank" rel="noopener">Facebook</a>
                <a href="https://www.linkedin.com/in/aleksandr-korsheniuk-51a3812b9/" target="_blank" rel="noopener">LinkedIn</a>
                <a href="https://www.pinterest.com/aakzvosd/" target="_blank" rel="noopener">Pinterest</a>
                <a href="https://www.are.na/mda-sanek/channels" target="_blank" rel="noopener">Are.na</a>
            </div>
            <div>
                <a href="Profile.pdf" target="_blank" rel="noopener">CV</a>
                <a href="mailto:akzvosd@gmail.com">Mail</a>
                <a href="https://www.t.me/mdasanek" target="_blank" rel="noopener">Telegram</a>
                <a href="https://calendar.app.google/bf5LzfM2pWyRXSmJ7" target="_blank" rel="noopener">Book a call</a>
            </div>
            </div>
      </div>
    </section>
    </div>

    <!-- Gallery Section -->
    <section class="gallery" id="gallery"></section>

    <!-- Bottom Buttons -->
    <div class="bottom-buttons">
        <a href="https://www.t.me/mdasanek" target="_blank" rel="noopener">telegram</a>
    </div>

    <div id="modal" style="display:none;position:fixed;z-index:1000;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);align-items:center;justify-content:center;">
        <div id="modal-content" style="position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center;">
            <img id="modal-img" src="" alt="" style="max-width:90vw;max-height:80vh;box-shadow:0 4px 32px #000;display:none;">
            <video id="modal-video" src="" style="max-width:90vw;max-height:80vh;box-shadow:0 4px 32px #000;display:none;" autoplay loop muted playsinline></video>
            <p id="modal-caption" style="color:#fff;font-size:1.2em;margin-top:12px;text-align:center;"></p>
        </div>
    </div>
    </div>
    <!-- End Main Content -->

    <script>
    async function loadGallery() {
        const gallery = document.getElementById('gallery');
        const preloaderPercent = document.getElementById('preloader-percent');
        
        try {
            const res = await fetch('gallery.json');
            if (!res.ok) {
                throw new Error(`HTTP error! status: ${res.status}`);
            }
            const galleryItems = await res.json();
            
            let loadedCount = 0;
            const totalItems = galleryItems.length;
            
            // Если галерея пустая, сразу скрываем прелоадер
            if (totalItems === 0) {
                hidePreloader();
                return;
            }
            
            // Определяем количество приоритетных изображений (первые, которые загружаем без lazy)
            const PRIORITY_COUNT = Math.min(40, totalItems);
            const startTime = Date.now();
            const MIN_DISPLAY_TIME = 1500; // Минимум 1.5 секунды показа прелоадера
            
            // Счетчик для отслеживания загруженных приоритетных изображений
            let priorityLoaded = 0;
            
            // Переменные для контроля скорости обновления счетчика
            let displayedPercent = 0; // Текущий отображаемый процент
            let targetPercent = 0; // Целевой процент (реальный прогресс)
            let lastUpdateTime = Date.now();
            let isAnimating = false; // Флаг для предотвращения множественных вызовов анимации
            const MIN_UPDATE_INTERVAL = 30; // Минимальный интервал между обновлениями (мс)
            const MAX_PERCENT_PER_UPDATE = 2; // Максимальное увеличение процента за одно обновление
            
            // Функция для плавного обновления счетчика
            const animateProgress = () => {
                const now = Date.now();
                const elapsed = now - lastUpdateTime;
                
                if (elapsed >= MIN_UPDATE_INTERVAL && displayedPercent < targetPercent) {
                    // Вычисляем, на сколько можно увеличить процент
                    const maxIncrease = Math.min(
                        MAX_PERCENT_PER_UPDATE,
                        targetPercent - displayedPercent
                    );
                    
                    // Увеличиваем с учетом времени (плавная анимация)
                    const increase = Math.min(maxIncrease, Math.ceil((targetPercent - displayedPercent) * 0.3));
                    displayedPercent = Math.min(displayedPercent + increase, targetPercent, 100);
                    
                    if (preloaderPercent) {
                        preloaderPercent.textContent = Math.round(displayedPercent);
                    }
                    
                    lastUpdateTime = now;
                }
                
                // Продолжаем анимацию, если есть разница между отображаемым и целевым процентом
                if (displayedPercent < targetPercent) {
                    requestAnimationFrame(animateProgress);
                } else {
                    isAnimating = false;
                }
            };
            
            const updateProgress = (isPriority = false) => {
                if (isPriority) {
                    priorityLoaded++;
                } else {
                    loadedCount++;
                }
                
                // Вычисляем процент: реальный прогресс приоритетных + симуляция остальных
                const priorityPercent = (priorityLoaded / PRIORITY_COUNT) * 60; // Первые 40 дают 60%
                const remainingPercent = Math.min((loadedCount / Math.max(1, totalItems - PRIORITY_COUNT)) * 40, 40); // Остальные дают 40%
                const calculatedPercent = Math.min(Math.round(priorityPercent + remainingPercent), 100);
                
                // Обновляем целевой процент (реальный прогресс)
                targetPercent = calculatedPercent;
                
                // Запускаем анимацию, если она еще не запущена
                if (displayedPercent < targetPercent && !isAnimating) {
                    isAnimating = true;
                    requestAnimationFrame(animateProgress);
                }
            };
            
            // Плавное доведение счетчика до 100% если нужно
            const ensureProgressTo100 = () => {
                const elapsed = Date.now() - startTime;
                
                // Если прошло 80% минимального времени и счетчик еще не 100, плавно доводим
                if (elapsed >= MIN_DISPLAY_TIME * 0.8 && displayedPercent < 100) {
                    // Вычисляем реальный прогресс
                    const realProgress = Math.min(
                        Math.round((priorityLoaded / PRIORITY_COUNT) * 60 + (loadedCount / Math.max(1, totalItems - PRIORITY_COUNT)) * 40),
                        100
                    );
                    
                    // Обновляем целевой процент
                    targetPercent = Math.max(targetPercent, realProgress, 95); // Минимум 95% если прошло 80% времени
                    
                    // Запускаем анимацию, если она еще не запущена
                    if (displayedPercent < targetPercent && !isAnimating) {
                        isAnimating = true;
                        requestAnimationFrame(animateProgress);
                    }
                }
                
                // Продолжаем проверку пока не прошло минимальное время
                if (elapsed < MIN_DISPLAY_TIME) {
                    setTimeout(ensureProgressTo100, 50);
                }
            };
            
            // Запускаем проверку прогресса
            setTimeout(ensureProgressTo100, MIN_DISPLAY_TIME * 0.8);
            
            galleryItems.forEach((item, index) => {
                const isPriority = index < PRIORITY_COUNT;
                const isVideo = item.type === 'video' || /\.(mp4|webm)$/i.test(item.src);
                
            if (item.caption && item.caption.trim()) {
                const div = document.createElement('div');
                div.className = 'block';
                    
                    if (isVideo) {
                        const video = document.createElement('video');
                        video.src = item.src;
                        video.autoplay = true;
                        video.loop = true;
                        video.muted = true;
                        video.playsInline = true;
                        video.style.width = '100%';
                        video.style.height = 'auto';
                        div.appendChild(video);
                        
                        // Проверяем готовность видео
                        setTimeout(() => {
                            if (video.readyState >= 2) { // HAVE_CURRENT_DATA
                                updateProgress(isPriority);
                            } else {
                                video.addEventListener('loadeddata', () => updateProgress(isPriority), { once: true });
                                video.addEventListener('error', () => {
                                    console.warn('Failed to load video:', item.src);
                                    updateProgress(isPriority);
                                }, { once: true });
                            }
                        }, 0);
                    } else {
                        const img = document.createElement('img');
                        // Приоритетные изображения загружаем без lazy loading
                        if (isPriority) {
                            img.loading = 'eager';
                        } else {
                            img.loading = 'lazy';
                        }
                        img.src = item.src;
                        img.alt = item.caption;
                        div.appendChild(img);
                        
                        // Проверяем, не загружено ли уже изображение из кеша
                        // Используем setTimeout, чтобы дать браузеру время установить complete
                        setTimeout(() => {
                            if (img.complete && img.naturalWidth !== 0) {
                                updateProgress(isPriority);
                            } else {
                                img.addEventListener('load', () => updateProgress(isPriority), { once: true });
                                img.addEventListener('error', () => {
                                    console.warn('Failed to load image:', item.src);
                                    updateProgress(isPriority);
                                }, { once: true });
                            }
                        }, 0);
                    }
                    
                const p = document.createElement('p');
                p.textContent = item.caption;
                div.appendChild(p);
                gallery.appendChild(div);
                } else {
                    if (isVideo) {
                        const video = document.createElement('video');
                        video.src = item.src;
                        video.autoplay = true;
                        video.loop = true;
                        video.muted = true;
                        video.playsInline = true;
                        video.style.width = '100%';
                        video.style.height = 'auto';
                        gallery.appendChild(video);
                        
                        // Проверяем готовность видео
                        setTimeout(() => {
                            if (video.readyState >= 2) { // HAVE_CURRENT_DATA
                                updateProgress(isPriority);
                            } else {
                                video.addEventListener('loadeddata', () => updateProgress(isPriority), { once: true });
                                video.addEventListener('error', () => {
                                    console.warn('Failed to load video:', item.src);
                                    updateProgress(isPriority);
                                }, { once: true });
                            }
                        }, 0);
                    } else {
                        const img = document.createElement('img');
                        // Приоритетные изображения загружаем без lazy loading
                        if (isPriority) {
                            img.loading = 'eager';
                        } else {
                            img.loading = 'lazy';
                        }
                        img.src = item.src;
                        img.alt = '';
                        gallery.appendChild(img);
                        
                        // Проверяем, не загружено ли уже изображение из кеша
                        // Используем setTimeout, чтобы дать браузеру время установить complete
                        setTimeout(() => {
                            if (img.complete && img.naturalWidth !== 0) {
                                updateProgress(isPriority);
                            } else {
                                img.addEventListener('load', () => updateProgress(isPriority), { once: true });
                                img.addEventListener('error', () => {
                                    console.warn('Failed to load image:', item.src);
                                    updateProgress(isPriority);
                                }, { once: true });
                            }
                        }, 0);
                    }
                }
            });
            
            // Показываем сайт после загрузки приоритетных изображений и минимум через 1.5 секунды
            await new Promise(resolve => {
                const checkComplete = () => {
                    const elapsed = Date.now() - startTime;
                    
                    // Доводим счетчик до 100% перед закрытием (плавно)
                    if (displayedPercent < 100) {
                        targetPercent = 100;
                        if (!isAnimating) {
                            isAnimating = true;
                            requestAnimationFrame(animateProgress);
                        }
                    }
                    
                    // Показываем сайт если:
                    // 1. Загружены все приоритетные изображения И прошло минимум 1.5 секунды И счетчик достиг хотя бы 95%
                    // 2. Или прошло больше 3 секунд (на случай проблем с загрузкой)
                    if ((priorityLoaded >= PRIORITY_COUNT && elapsed >= MIN_DISPLAY_TIME && displayedPercent >= 95) || 
                        elapsed >= 3000) {
                        // Финально устанавливаем 100% перед закрытием
                        if (preloaderPercent) {
                            preloaderPercent.textContent = '100';
                        }
                        resolve();
                        return;
                    }
                    
                    setTimeout(checkComplete, 50); // Проверяем каждые 50мс
                };
                checkComplete();
            });
            
            // Ждем выстраивания колонок - даем браузеру время на пересчет layout
            await new Promise(resolve => {
                // Принудительно вызываем reflow для пересчета layout
                void gallery.offsetHeight;
                
                // Ждем следующий кадр анимации
                requestAnimationFrame(() => {
                    requestAnimationFrame(() => {
                        // Еще небольшая задержка для стабилизации колонок
                        setTimeout(resolve, 200);
                    });
                });
            });
            
            // Небольшая задержка перед скрытием прелоадера
            setTimeout(() => {
                hidePreloader();
            }, 300);
        } catch (e) {
            gallery.innerHTML = '<p style="color:red">Ошибка загрузки галереи</p>';
            hidePreloader();
        }
    }
    
    function hidePreloader() {
        const preloader = document.getElementById('preloader');
        const mainContent = document.getElementById('main-content');
        
        if (preloader && mainContent) {
            // Показываем контент
            mainContent.style.visibility = 'visible';
            mainContent.style.opacity = '1';
            
            // Скрываем прелоадер
            preloader.style.transition = 'opacity 0.8s ease';
            preloader.style.opacity = '0';
            
            setTimeout(() => {
                preloader.style.display = 'none';
            }, 800);
        }
    }
    

    function addModalView() {
        const gallery = document.getElementById('gallery');
        const modal = document.getElementById('modal');
        const modalImg = document.getElementById('modal-img');
        const modalVideo = document.getElementById('modal-video');
        const modalCaption = document.getElementById('modal-caption');
        
        gallery.addEventListener('click', function(e) {
            let target = e.target;
            let src = '';
            let caption = '';
            let isVideo = false;
            
            if (target.tagName === 'IMG' && target.parentElement.classList.contains('block')) {
                src = target.src;
                caption = target.parentElement.querySelector('p')?.textContent || '';
            } else if (target.tagName === 'IMG') {
                src = target.src;
                caption = '';
            } else if (target.tagName === 'VIDEO' && target.parentElement.classList.contains('block')) {
                src = target.src;
                caption = target.parentElement.querySelector('p')?.textContent || '';
                isVideo = true;
            } else if (target.tagName === 'VIDEO') {
                src = target.src;
                caption = '';
                isVideo = true;
            } else {
                return;
            }
            
            if (isVideo) {
                modalImg.style.display = 'none';
                modalVideo.style.display = 'block';
                modalVideo.src = src;
                modalVideo.load();
            } else {
                modalVideo.style.display = 'none';
                modalImg.style.display = 'block';
            modalImg.src = src;
            }
            modalCaption.textContent = caption;
            modal.style.display = 'flex';
        });
        
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
                modalImg.src = '';
                modalVideo.src = '';
                modalVideo.pause();
                modalCaption.textContent = '';
            }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Сначала загружаем GIF, затем начинаем загрузку галереи
        const gifContainer = document.getElementById('loader-gif-container');
        if (gifContainer) {
            const loaderGif = document.createElement('img');
            loaderGif.id = 'loader-gif';
            loaderGif.src = 'loader_test.gif';
            loaderGif.alt = 'Loading...';
            loaderGif.style.width = '120px';
            loaderGif.style.height = 'auto';
            loaderGif.style.imageRendering = 'auto';
            
            let galleryLoadStarted = false;
            const startGalleryLoad = () => {
                if (!galleryLoadStarted) {
                    galleryLoadStarted = true;
                    loadGallery();
                }
            };
            
            // Ждем загрузки GIF, затем начинаем загрузку галереи
            loaderGif.onload = startGalleryLoad;
            
            // Если загрузка не удалась, все равно начинаем загрузку
            loaderGif.onerror = () => {
                console.warn('Failed to load preloader GIF, continuing anyway');
                startGalleryLoad();
            };
            
            gifContainer.appendChild(loaderGif);
            
            // Проверяем, не загружен ли GIF уже из кеша
            setTimeout(() => {
                if (loaderGif.complete && loaderGif.naturalWidth !== 0) {
                    // GIF уже загружен из кеша, начинаем загрузку галереи
                    startGalleryLoad();
                } else {
                    // Таймаут на случай, если GIF не загрузится за разумное время
                    setTimeout(() => {
                        if (!galleryLoadStarted) {
                            console.warn('Preloader GIF loading timeout, continuing anyway');
                            startGalleryLoad();
                        }
                    }, 3000); // 3 секунды максимум на загрузку GIF
                }
            }, 0);
        } else {
            // Если контейнера нет, сразу начинаем загрузку
            loadGallery();
        }
        
        // Эти функции не зависят от GIF
        addModalView();
    });
    </script>
</body>
</html>
